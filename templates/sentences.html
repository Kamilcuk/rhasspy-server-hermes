{% extends "layout.html" %}
{% block body %}
<div class="container">
    <form class="form" method="post" onsubmit="beforeSubmit()">
        <div class="form-group">
            <div class="form-row text-muted pl-1">
                <p>Example sentences, formatted <a href="https://docs.python.org/3/library/configparser.html">ini style</a>, with each section (intent) containing a <a href="https://rhasspy.readthedocs.io/en/latest/training/#sentencesini">simplified JSGF Grammar</a>.</p>
            </div>
        </div>
        <div class="form-group">
            <div class="form-row">
                <button type="submit" class="btn btn-primary sentences-button">Save Sentences</button>
            </div>
        </div>
        <div class="form-group">
            <div class="form-row">
                <textarea id="sentences" name="sentences" class="form-control" style="border-width: 3px" type="text" rows="25" oninput="setDirty()">{{ sentences | safe }}</textarea>
            </div>
        </div>
        <div class="form-group">
            <div class="form-row text-muted pl-1">
                <p>Sentences shouldn't contain non-words characters like commas and periods. Optional words are <tt>[bracketed]</tt>. Alternatives are <tt>(separated | by | pipes)</tt>. Rules have an <tt>=</tt> after their name, optionally contain <tt>{tags}</tt>, and are referenced <tt>&lt;by_name&gt;</tt>.</p>
            </div>
        </div>
        <div class="form-group">
            <div class="form-row">
                <button type="submit" class="btn btn-primary sentences-button"">Save Sentences</button>
            </div>
        </div>
    </form>
</div>
{% endblock %}

{% block script %}
<script type="text/javascript">
 var isDirty = false;

 function setDirty() {
     isDirty = true;
     $('#sentences').css('border-color', 'red');
     $('.sentences-button').addClass('btn-danger');
 }

 function beforeSubmit() {
     isDirty = false;
     rhasspy.showBusy('Saving sentences');
 }

 window.onbeforeunload = function() {
     if (isDirty) {
         return 'Sentences were not saved. Are you sure?"'
     }
 }
</script>
{% endblock %}
